# Kube Prometheus Stack Helm Values
# For Shelfware Application Monitoring

prometheus:
  prometheusSpec:
    retention: 30d
    storageSpec:
      volumeClaimTemplate:
        spec:
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 20Gi
    # Service Monitor selector to pick up all ServiceMonitors
    serviceMonitorSelectorNilUsesHelmValues: false
    podMonitorSelectorNilUsesHelmValues: false

grafana:
  adminPassword: admin
  persistence:
    enabled: true
    size: 5Gi
  # Disable built-in datasources
  sidecar:
    datasources:
      enabled: true
      defaultDatasourceEnabled: false
  datasources:
    datasources.yaml:
      apiVersion: 1
      datasources:
        - name: Prometheus
          type: prometheus
          url: http://monitoring-stack-kube-prom-prometheus:9090
          access: proxy
          isDefault: true
          jsonData:
            httpMethod: POST
            timeInterval: 30s

# AlertManager configuration
alertmanager:
  enabled: true

# Node Exporter
nodeExporter:
  enabled: true

# Kube State Metrics
kubeStateMetrics:
  enabled: true

# Prometheus Operator
prometheusOperator:
  enabled: true
